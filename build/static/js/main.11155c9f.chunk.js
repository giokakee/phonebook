(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{20:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),s=n.n(c),u=(n(37),n(38),n(2)),i=n(3),o=n.n(i),l=n(5),d=n(4),j=(n(20),n(10)),b=n.n(j),p=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a,r,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.password,r=t.token,e.next=3,b.a.post("/user/login",{username:n,password:a,token:r});case 3:return c=e.sent,s=c.data,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){var t=e.username,n=e.password,a=e.token;return function(){var e=Object(l.a)(o.a.mark((function e(r){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p({username:t,password:n,token:a});case 2:c=e.sent,r({type:"LOGIN",data:c});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return!!t.data&&(window.localStorage.setItem("user",JSON.stringify(t.data)),!0);case"LOGOUT":return window.localStorage.removeItem("user"),!1;default:return e}},h=n(9),O=n(1),v={dispatchLogin:f},x=Object(h.b)(null,v)((function(e){var t=e.dispatchLogin,n=Object(a.useState)(""),r=Object(d.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(""),j=Object(d.a)(i,2),b=j[0],p=j[1],f=Object(u.f)(),m=function(){var e=Object(l.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t({username:c,password:b}),f("/"),s(""),p("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"login",children:[Object(O.jsx)("h1",{children:"Login"}),Object(O.jsxs)("form",{onSubmit:function(e){return m(e)},children:[Object(O.jsxs)("div",{className:"div",children:[Object(O.jsx)("input",{value:c,type:"text",onChange:function(e){var t=e.target;return s(t.value)},required:!0,className:"input"}),Object(O.jsx)("label",{className:"label",htmlFor:"username",children:Object(O.jsx)("span",{className:"span",children:"username"})})]}),Object(O.jsxs)("div",{className:"div",children:[Object(O.jsx)("input",{type:"password",value:b,onChange:function(e){var t=e.target;return p(t.value)},required:!0,className:"input"}),Object(O.jsx)("label",{className:"label",htmlFor:"password",children:Object(O.jsx)("span",{className:"span",children:"password"})})]}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{className:"loginLinkButton",type:"submit",children:"login"})}),Object(O.jsx)("button",{onClick:function(){return f("/")},className:"backButton",children:"back"})]})]})})),g=(n(65),function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.password,e.next=3,b.a.post("/user/register",{username:n,password:a});case 3:return r=e.sent,c=r.data,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w=function(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(d.a)(c,2),i=s[0],j=s[1],b=Object(a.useState)(""),p=Object(d.a)(b,2),f=p[0],m=p[1],h=Object(u.f)(),v=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),i!==f){e.next=11;break}return e.next=4,g({username:n,password:i});case 4:if(a=e.sent,r(""),j(""),m(""),console.log(a),!a){e.next=11;break}return e.abrupt("return",h("/login"));case 11:m("");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"register",children:[Object(O.jsx)("h1",{children:"Register"}),Object(O.jsxs)("form",{className:"registerForm",onSubmit:function(e){return v(e)},autoComplete:"off",children:[Object(O.jsxs)("div",{className:"div",children:[Object(O.jsx)("input",{className:"input",value:n,type:"text",name:"username",onChange:function(e){var t=e.target;return r(t.value)},required:!0}),Object(O.jsx)("label",{className:"label",htmlFor:"username",children:Object(O.jsx)("span",{className:"span",children:"username"})})]}),Object(O.jsxs)("div",{className:"div",children:[Object(O.jsx)("input",{className:"input",type:"password",name:"password",value:i,onChange:function(e){var t=e.target;return j(t.value)},required:!0}),Object(O.jsx)("label",{className:"label",htmlFor:"password",children:Object(O.jsx)("span",{className:"span",children:"password"})})]}),Object(O.jsxs)("div",{className:"div",children:[Object(O.jsx)("input",{className:"input",type:"password",name:"passwordConfirm",value:f,onChange:function(e){var t=e.target;return m(t.value)},required:!0}),Object(O.jsx)("label",{className:"label",htmlFor:"passwordConfirm",children:Object(O.jsx)("span",{className:"span",children:"confirm"})})]}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{className:"registerButton",type:"submit",children:"register"})})]}),Object(O.jsx)("button",{onClick:function(){return h("/login")},className:"loginButton",children:"login"})]})},N=(n(66),n(32)),k="/contacts",y=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,e.next=3,b.a.post("".concat(k,"/all"),{token:n});case 3:return a=e.sent,r=a.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a,r,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.number,r=t.token,e.next=3,b.a.post("".concat(k,"/add"),{name:n,number:a,token:r});case 3:return c=e.sent,s=c.data,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,a=t.token,e.next=3,b.a.delete(k,{data:{id:n,token:a}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a,r,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.number,r=t.id,e.next=3,b.a.post("".concat(k,"/edit"),{name:n,number:a,id:r});case 3:return c=e.sent,s=c.data,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT":return t.data;case"ADD":return[].concat(Object(N.a)(e),[t.data]);case"EDIT":if(!t.data)return window.localStorage.removeItem("user"),e;var n=t.data;return e.map((function(e){return e.id===t.data.id?n:e}));case"DELETE":return e.filter((function(e){return e.id!==t.id}));default:return e}},D={add:function(e){var t=e.name,n=e.number,a=e.token;return function(){var e=Object(l.a)(o.a.mark((function e(r){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C({name:t,number:n,token:a});case 2:c=e.sent,r({type:"ADD",data:c});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},B=Object(h.b)(null,D)((function(e){var t=e.add,n=Object(a.useState)(""),r=Object(d.a)(n,2),c=r[0],s=r[1],u=Object(a.useState)(""),i=Object(d.a)(u,2),o=i[0],l=i[1],j=JSON.parse(window.localStorage.getItem("user"));return Object(O.jsxs)("div",{className:"addMain",children:[Object(O.jsx)("h2",{children:"Add Contact"}),Object(O.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault();var n=c.match(/[\d]/g),a=o.match(/[\D]/g);console.log(n,a),a||n?console.log("its wrong"):(t({name:c,number:o,token:j.token}),s(""),l(""))}(e)},children:[Object(O.jsxs)("div",{className:"div",children:[Object(O.jsx)("input",{value:c,onChange:function(e){var t=e.target;return s(t.value)},required:!0,type:"text",autoComplete:"off",className:"input"}),Object(O.jsx)("label",{className:"label",children:Object(O.jsx)("span",{className:"span",children:"Name"})})]}),Object(O.jsxs)("div",{className:"div",children:[Object(O.jsx)("input",{value:o,onChange:function(e){var t=e.target;return l(t.value)},required:!0,autoComplete:"off",className:"input"}),Object(O.jsx)("label",{className:"label",children:Object(O.jsx)("span",{className:"span",children:"Number"})})]}),Object(O.jsx)("button",{className:"addButton",type:"submit",children:"Add"})]})]})})),T={init:function(e){var t=e.token;return function(){var e=Object(l.a)(o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({token:t});case 2:a=e.sent,n({type:"INIT",data:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},deleteContact:function(e){var t=e.id,n=e.token;return function(){var e=Object(l.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({id:t,token:n});case 2:a({type:"DELETE",id:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},editContact:function(e){return function(){var t=Object(l.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I(e);case 2:a=t.sent,n({type:"EDIT",data:!!a&&e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},E=Object(h.b)((function(e){return{contacts:e.contactsReducer,user:e.user}}),T)((function(e){var t=e.init,n=e.contacts,r=e.deleteContact,c=e.editContact,s=Object(a.useState)(""),u=Object(d.a)(s,2),i=u[0],o=u[1],l=Object(a.useState)(""),j=Object(d.a)(l,2),b=j[0],p=j[1],f=Object(a.useState)(""),m=Object(d.a)(f,2),h=m[0],v=m[1],x=Object(a.useState)(""),g=Object(d.a)(x,2),w=g[0],N=g[1];Object(a.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("user"));t({token:e.token})}),[t]);var k=JSON.parse(window.localStorage.getItem("user")),y=i.length>0&&!i.match(/[\d]/g)?n.filter((function(e){return e.name.indexOf(i)>=0})):i.match(/[\D]/g)?n:n.filter((function(e){return String(e.number).indexOf(i)>=0}));return Object(O.jsxs)("div",{className:"phonebook",children:[Object(O.jsx)(B,{}),Object(O.jsxs)("div",{className:"contacts",children:[Object(O.jsx)("h2",{style:{marginBottom:"10px"},children:"Contacts"}),Object(O.jsxs)("div",{className:"div",children:[Object(O.jsx)("input",{value:i,type:"text",onChange:function(e){var t=e.target;return o(t.value)},required:!0,className:"input",autoComplete:"off"}),Object(O.jsx)("label",{className:"label",htmlFor:"username",children:Object(O.jsx)("span",{className:"span",children:"search"})})]}),y.map((function(e){return b===e.id?Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"div",children:[Object(O.jsx)("input",{value:h,onChange:function(e){var t=e.target;return v(t.value)},required:!0,type:"text",autoComplete:"off",className:"input"}),Object(O.jsx)("label",{className:"label",children:Object(O.jsx)("span",{className:"span",children:"New username"})})]}),Object(O.jsxs)("div",{className:"div",children:[Object(O.jsx)("input",{value:w,onChange:function(e){var t=e.target;return N(t.value)},required:!0,autoComplete:"off",className:"input"}),Object(O.jsx)("label",{className:"label",children:Object(O.jsx)("span",{className:"span",children:"New number"})})]}),Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px",marginTop:"15px"},children:[Object(O.jsx)("button",{onClick:function(){return function(e){var t=e.id,n=h.match(/[\d]/g);w.match(/[\D]/g)||n?console.log("its wrong"):(c({name:h,number:w,id:t}),v(""),N(""),p(""))}({id:e.id})},className:"editButton",children:"edit"}),Object(O.jsx)("button",{className:"cancelButton",onClick:function(){return p("")},children:"Cancel"})]})]},e.id):Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{children:[" ",e.name," - ",e.number]}),Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(O.jsx)("button",{className:"editButton",onClick:function(){return p(e.id)},children:"edit"}),Object(O.jsx)("button",{className:"deleteButton",style:{cursor:"pointer"},onClick:function(){return r({id:e.id,token:k.token})},children:"X"})]})]},e.id)}))]})]})})),F={dispatchLogin:f,dispatchLogout:function(){return function(e){e({type:"LOGOUT"})}}},q=Object(h.b)((function(e){return{user:e.user}}),F)((function(e){var t=e.user,n=e.dispatchLogin,r=e.dispatchLogout;return Object(a.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("user"));e&&n({token:e.token})}),[n,t]),Object(O.jsxs)("div",{children:[Object(O.jsx)("header",{children:Object(O.jsx)("h1",{style:{color:"rgb(133, 29, 127)"},children:"Phonebook"})}),t?Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{onClick:r,style:{float:"right",marginRight:"100px"},children:"Log out"}),Object(O.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(O.jsx)(E,{})})]}):Object(O.jsx)("div",{className:"user",children:Object(O.jsxs)(u.c,{children:[Object(O.jsx)(u.a,{path:"/login",element:Object(O.jsx)(x,{})}),Object(O.jsx)(u.a,{path:"/",element:Object(O.jsx)(w,{})})]})})]})})),J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,68)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},R=n(12),A=n(14),G=n(30),M=n(31),P=Object(A.combineReducers)({contactsReducer:L,user:m}),U=Object(A.createStore)(P,Object(G.composeWithDevTools)(Object(A.applyMiddleware)(M.a)));s.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(h.a,{store:U,children:Object(O.jsx)(R.a,{children:Object(O.jsx)(q,{})})})}),document.getElementById("root")),J()}},[[67,1,2]]]);
//# sourceMappingURL=main.11155c9f.chunk.js.map